<div class="dataentrypage parent-margin">
    <section class="panel tab-panel">
        <div class="row">
            <div class="col-md-12">
                <h4>{{ orgUnit.displayName }}</h4>
            </div>
        </div>
        <div class="row">
            <div class="col-md-4">
                <select ng-model="selectedDatasetId" ng-options="dataset.id as dataset.name for dataset in datasets">
                </select>
            </div>
        </div>
        <div class="text-center" ng-repeat="chart in chartData | filter: {dataset:selectedDatasetId}">
            <h3>{{chart.title}}</h3>
            <h4 class="mb50" ng-if="chart.data.length === 0">
                {{resourceBundle.noDataAvailable}}
            </h4>
            <button ng-if="chart.data.length > 0" ng-click="downloadChartAsPng($event)">Download Chart</button>
            <p ng-if="chart.type === 'line' &amp;&amp; chart.data.length > 0">
                <nvd3-line-chart id="chart-{{$index}}" data="chart.data" width="750" height="400" xAxisTickFormat="xAxisTickFormat(chart)" yAxisTickFormat="yAxisTickFormatForInteger()" showXAxis="true" showYAxis="true" forcex="[1428863400000, 1434911400000, 1428863400000, 1429468200000]" showLegend="true">
                    <svg></svg>
                </nvd3-line-chart>
            </p>
            <p ng-if="chart.type === 'column' &amp;&amp; chart.data.length > 0">
                <nvd3-multi-bar-chart data="chart.data" id="chart-{{$index}}" width="750" height="400" rotateLabels="45" showXAxis="true" showYAxis="true" showValues="true" yAxisTickFormat="yAxisTickFormatForInteger()" xAxisTickFormat="xAxisTickFormat()" showLegend="true" margin="{left:75,top:60,bottom:10,right:10}">
                    <svg></svg>
                </nvd3-multi-bar-chart>
            </p>
            <p ng-if="chart.type === 'stackedcolumn' &amp;&amp; chart.data.length > 0">
                <nvd3-multi-bar-chart data="chart.data" id="chart-{{$index}}" width="750" height="400" rotateLabels="45" showXAxis="true" showYAxis="true" showValues="true" yAxisTickFormat="yAxisTickFormatForInteger()" xAxisTickFormat="xAxisTickFormat()" stacked="true" showLegend="true">
                    <svg></svg>
                </nvd3-multi-bar-chart>
            </p>
        </div>
        <div class="loading" ng-show="loading">
            <img src="img/ajax-loader.gif" class="spinner" />
        </div>
    </section>
</div>
